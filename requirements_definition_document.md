イズミフィットネスセンター

# 要件定義書

## 1. 概要

スマホのカメラセンサーを利用した泉の実録音声付き筋トレ支援サービス

本アプリケーションは、泉がパーソナルトレーナーとなり、音声と写真で腹筋運動をサポートするシンプルなWebアプリケーションである。スマートフォンのインカメラ機能を利用してユーザーの腹筋運動を自動でカウントし、リアルタイムの音声フィードバックでモチベーションを維持させる。

## 2. 目的・目標

**目的:** 孤独になりがちな自宅での筋トレを、親しい友人が応援してくれるような楽しい体験に変え、運動の習慣化を促す。

**目標:** 9日間のハッカソン期間内に、指定の三層アーキテクチャでコア機能（腹筋の自動カウントと音声再生）が安定して動作するプロトタイプを完成させる。

## 3. ターゲット

- 筋トレのモチベーション維持に課題を感じている人
- 一人で黙々とトレーニングするのが苦手な人
- 簡単で手軽な運動を始めたいと考えている初心者

## 4. 機能要件

### 4.1. ホーム画面

- トレーナーである泉の写真を表示する。
- 腹筋の目標回数を10回から30回の間で選択できるUI（ドロップダウン）を設置する。
- トレーニングを開始するための「開始」ボタンを設置する。

### 4.2. トレーニング画面

- 画面遷移後、スマートフォンのインカメラを起動し、ユーザーの映像を表示する。
- 画面の隅などに、トレーナーである泉の写真を表示する。
- トレーニングを途中で中断するための「リタイア」ボタンを設置する。
- 現在のカウント数を画面に表示する。

### 4.3. 運動判定・カウント機能

- インカメラの映像を元に、ユーザーが腹筋運動で体を起こした状態を判定する。
- 体が起きたと判定された場合にのみ、カウントを1つ進める。

### 4.4. 音声再生機能

- **開始時:** ホーム画面で「開始」ボタンを押すと、「今日もはりきっていきましょう！」という音声が再生される。
- **カウント時:** 1回カウントするごとに「1！」「2！」...と回数を読み上げる音声が再生される。
- **中間応援:** 設定回数の半分に到達した際、「あと半分！」という音声が再生される。
- **終盤応援:** 残り5回になった際、「あと5回！」という音声が再生される。
- **完了時:** 設定回数をすべて達成すると、「よく頑張りました」という音声が再生され、自動でホーム画面に戻る。
- **リタイア時:** 「リタイア」ボタンを押すと、「次は頑張りましょう」という音声が再生され、ホーム画面に戻る。

## 5. アーキテクチャ

本アプリはハッカソンの要件に基づき、以下の三層アーキテクチャで構成する。

- **プレゼンテーション層 (フロントエンド)**
    - **役割:** ユーザーが直接操作する全ての画面表示とロジックを担当する。
    - **機能:** UI表示、回数設定、カメラ映像の取得、音声ファイルの再生。
    - **技術スタック:** HTML, CSS, JavaScript (React)
- **アプリケーション層 (バックエンド)**
    - **役割:** フロントエンドからのリクエストに応じて、必要なデータを提供するAPIサーバー。顔認識による腹筋判定。カウント処理。
    - **機能:** データベースからトレーナー（泉さん）の写真URLと各種音声ファイルのURLリストを取得し、フロントエンドに返すAPIを提供する。フロントエンドからもらったカメラ映像をAPIなどを利用して顔認識し，脚から顔が検出された際にカウントを＋１する。カウントをフロントエンドに渡す。
    - **技術スタック:** Node.js
- **データ層 (データベース)**
    - **役割:** アプリケーションで利用するデータを永続的に保存する。
    - **機能:** トレーナーの名前、写真ファイルの保存先URL、各状況に応じた音声ファイルの保存先URLを保持する。
    - **技術スタック:** MySQL（パスにオブジェクトストレージ音声を入れるS3）